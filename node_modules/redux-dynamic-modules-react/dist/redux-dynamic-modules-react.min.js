!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("redux"),require("react"),require("react-redux")):"function"==typeof define&&define.amd?define(["redux","react","react-redux"],n):"object"==typeof exports?exports["redux-dynamic-modules"]=n(require("redux"),require("react"),require("react-redux")):e["redux-dynamic-modules"]=n(e.redux,e.react,e["react-redux"])}(window,function(e,n,t){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=4)}([function(n,t){n.exports=e},function(e,n,t){"use strict";n.__esModule=!0,n.getObjectRefCounter=function(e,n){e||(e=function(e,n){return e===n}),n||(n=function(){return!1});var t=[],r=[];return{getCount:function(n){if(void 0===n||null===n)return 0;var o=t.findIndex(function(t){return t&&e(t,n)});return-1===o?0:r[o]},add:function(o){if(void 0!==o&&null!==o){var i=t.findIndex(function(n){return n&&e(n,o)}),u=1;-1===i?(i=t.length,t.push(o)):u=r[i]+1,n(o)&&(u=1/0),r[i]=u}},remove:function(o){if(n(o))return!1;var i=t.findIndex(function(n){return n&&e(n,o)});return-1!==i&&(1===r[i]?(delete t[i],delete r[i],!0):(r[i]=r[i]-1,!1))}}},n.getStringRefCounter=function(){var e={};return{getCount:function(n){return void 0===n||null===n?0:e[n]||0},add:function(n){void 0!==n&&null!==n&&(e[n]?e[n]++:e[n]=1)},remove:function(n){return void 0!==n&&null!==n&&!!e[n]&&(1===e[n]?(delete e[n],!0):(e[n]--,!1))}}}},function(e,n,t){"use strict";n.__esModule=!0;var r=t(8);n.getMiddlewareManager=function(){var e=r.createDynamicMiddlewares();return{getItems:function(){return[]},enhancer:e.enhancer,add:function(n){return e.addMiddleware.apply(e,n),n},remove:function(n){return n.forEach(e.removeMiddleware),n},dispose:function(){e.resetMiddlewares()}}}},function(e,n,t){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};n.__esModule=!0;var o=t(1);n.getRefCountedManager=function(e,n,t){var i=o.getObjectRefCounter(n,t);e.getItems().forEach(function(e){return i.add(e)});var u=r({},e);return u.add=function(n){if(n){var t=n.filter(function(e){return e}),r=t.filter(function(e){return 0===i.getCount(e)});e.add(r),t.forEach(i.add)}},u.remove=function(n){n&&n.forEach(function(n){n&&(i.remove(n),0===i.getCount(n)&&e.remove([n]))})},u.dispose=function(){e.dispose()},u}},function(e,n,t){"use strict";function r(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}n.__esModule=!0,r(t(5)),r(t(13))},function(e,n,t){"use strict";function r(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}n.__esModule=!0,r(t(6)),r(t(12)),r(t(1)),r(t(2)),r(t(3))},function(e,n,t){"use strict";n.__esModule=!0;var r=t(0),o=t(7),i=t(2),u=t(9),d=t(3),a=t(11);n.createStore=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];var c=e.initialState,f=void 0===c?{}:c,s=e.extensions,l=void 0===s?[]:s,p=e.enhancers,v=void 0===p?[]:p,h=e.advancedCombineReducers,M=l.reduce(function(e,n){return n.middleware&&e.push.apply(e,n.middleware),e},[]),g=d.getRefCountedManager(i.getMiddlewareManager(),function(e,n){return e===n}),m=o.composeWithDevTools.apply(void 0,v.concat([r.applyMiddleware.apply(void 0,M.concat([g.enhancer]))])),y=d.getRefCountedManager(u.getModuleManager(g,l,h),function(e,n){return e.id===n.id},function(e){return e.retained}),_=r.createStore(y.getReducer,f,m);y.setDispatch(_.dispatch);var x=function(e){var n=a.flatten(e);return y.add(n),{remove:function(){y.remove(n)}}},w=function(e){return x([e])};return l.forEach(function(e){e.onModuleManagerCreated&&e.onModuleManagerCreated({addModule:w,addModules:x})}),_.addModule=w,_.addModules=x,_.dispose=function(){y.dispose(),g.dispose(),l.forEach(function(e){e.dispose&&e.dispose()})},_.addModules(n),_}},function(e,n,t){"use strict";var r=t(0).compose;n.__esModule=!0,n.composeWithDevTools=function(){if(0!==arguments.length)return"object"==typeof arguments[0]?r:r.apply(null,arguments)},n.devToolsEnhancer=function(){return function(e){return e}}},function(e,n,t){"use strict";n.__esModule=!0,n.createDynamicMiddlewares=n.resetMiddlewares=n.removeMiddleware=n.addMiddleware=void 0;var r=t(0),o=function(){var e=[];return{enhancer:function(n){return function(t){return function(o){var i=e.map(function(e){return e(n)});return r.compose.apply(void 0,i)(t)(o)}}},addMiddleware:function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];e=[].concat(e,t)},removeMiddleware:function(n){var t=e.findIndex(function(e){return e===n});-1!==t?e=e.filter(function(e,n){return n!==t}):console.error("Middleware does not exist!",n)},resetMiddlewares:function(){e=[]}}},i=o();n.default=i.enhancer;var u=i.addMiddleware,d=i.removeMiddleware,a=i.resetMiddlewares;n.addMiddleware=u,n.removeMiddleware=d,n.resetMiddlewares=a,n.createDynamicMiddlewares=o},function(e,n,t){"use strict";n.__esModule=!0;var r=t(10);n.getModuleManager=function(e,n,t){var o,i=null,u=[],d=new Set,a=function(e){if(e){if(!i)throw new Error("setDispatch should be called on ModuleManager before adding any modules.");e.forEach(i)}},c={getReducer:function(e,n){return o?o.reduce(e,n):e||null},setDispatch:function(e){i=e},getItems:function(){return[]},add:function(c){if(c&&0!==c.length){var f=[];(c=c.filter(function(e){return e})).forEach(function(n){if(!d.has(n.id)){d.add(n.id),u.push(n),function(e){if(e)if(o)for(var n in e)o.add(n,e[n]);else o=r.getRefCountedReducerManager(r.getReducerManager(e,t))}(n.reducerMap);var i=n.middlewares;i&&function(n){n&&e.add(n)}(i),f.push(n)}}),i({type:"@@Internal/ModuleManager/SeedReducers"}),f.forEach(function(e){n.forEach(function(n){n.onModuleAdded&&n.onModuleAdded(e)});var t={type:"@@Internal/ModuleManager/ModuleAdded",payload:e.id};a(e.initialActions?[t].concat(e.initialActions):[t])})}},remove:function(t){t&&(t=t.filter(function(e){return e}).reverse()).forEach(function(t){d.has(t.id)&&(a(t.finalActions),function(e){if(e&&o)for(var n in e)o.remove(n)}(t.reducerMap),function(n){n&&e.remove(n)}(t.middlewares),n.forEach(function(e){e.onModuleRemoved&&e.onModuleRemoved(t)}),d.delete(t.id),u=u.filter(function(e){return e.id!==t.id}),a([{type:"@@Internal/ModuleManager/ModuleRemoved",payload:t.id}]))})},dispose:function(){c.remove(u)}};return c}},function(e,n,t){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};n.__esModule=!0;var o=t(0),i=t(1);function u(e,n){return void 0===n&&(n=o.combineReducers),e&&0!==Object.keys(e).length?n(e):function(e,n){return e||null}}n.getRefCountedReducerManager=function(e){var n=i.getStringRefCounter();for(var t in e.getReducerMap())n.add(t);return{reduce:e.reduce,getReducerMap:e.getReducerMap,add:function(t,r){0===n.getCount(t)&&e.add(t,r),n.add(t)},remove:function(t){n.remove(t),0===n.getCount(t)&&e.remove(t)}}},n.getReducerManager=function(e,n){void 0===n&&(n=o.combineReducers);var t=n(e),i=r({},e),d=[];return{getReducerMap:function(){return i},reduce:function(e,n){if(d.length>0){e=r({},e);for(var o=0,i=d;o<i.length;o++)delete e[i[o]];d=[]}return void 0===e&&(e={}),t(e,n)},add:function(e,r){e&&!i[e]&&(i[e]=r,t=u(i,n))},remove:function(e){e&&i[e]&&(delete i[e],d.push(e),t=u(i,n))}}}},function(e,n,t){"use strict";n.__esModule=!0,n.flatten=function(e){if(e){for(var n=e.slice(),t=0;t<n.length;)Array.isArray(n[t])?n.splice.apply(n,[t,1].concat(n[t])):t++;return n}return e}},function(e,n,t){"use strict";n.__esModule=!0,n.getMap=function(e){var n=[],t={};return{keys:n,get:function(r){if(r){var o=n.findIndex(function(n){return n&&e(n,r)});if(-1!==o)return t[o]}},add:function(r,o){r&&-1===n.findIndex(function(n){return n&&e(n,r)})&&(n.push(r),t[n.length-1]=o)},remove:function(r){if(r){var o=n.findIndex(function(n){return n&&e(n,r)});if(-1!==o){delete n[o];var i=t[o];return delete t[o],i}}}}}},function(e,n,t){"use strict";var r=this&&this.__extends||function(){var e=function(n,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(n,t)};return function(n,t){function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};n.__esModule=!0;var i=t(14),u=t(15),d=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r(n,e),n.prototype.render=function(){var e=this;return i.createElement(u.ReactReduxContext.Consumer,null,function(n){return i.createElement(a,o({},e.props,{reactReduxContext:n}))})},n}(i.Component);n.DynamicModuleLoader=d;var a=function(e){function n(n){var t=e.call(this,n)||this;if(t._providerInitializationNeeded=!1,null==n.reactReduxContext){var r="Tried to render DynamicModuleLoader, but no ReactReduxContext was provided";throw console.error(r),new Error(r)}return t._store=n.reactReduxContext?n.reactReduxContext.store:void 0,t.props.strictMode?t.state={readyToRender:!1}:(t._addModules(),t.state={readyToRender:!0}),t}return r(n,e),n.prototype.render=function(){return this.state.readyToRender?this._providerInitializationNeeded?i.createElement(u.Provider,{store:this._store},i.createElement(d,o({},this.props))):this._renderLoader():null},n.prototype._renderLoader=function(){return this.props.children?"function"==typeof this.props.children?this.props.children():this.props.children:null},n.prototype._addModules=function(){var e=this.props,n=e.createStore,t=e.modules;if(this._store)this._addedModules=this._store.addModules(t);else{if(!n)throw new Error("Store could not be resolved from React context");this._store=n(),this._providerInitializationNeeded=!0}},n.prototype.componentDidMount=function(){this.props.strictMode&&(this._addModules(),this.setState({readyToRender:!0}))},n.prototype.componentWillUnmount=function(){this._addedModules&&(this._addedModules.remove(),this._addedModules=void 0)},n}(i.Component)},function(e,t){e.exports=n},function(e,n){e.exports=t}])});
//# sourceMappingURL=redux-dynamic-modules-react.min.js.map